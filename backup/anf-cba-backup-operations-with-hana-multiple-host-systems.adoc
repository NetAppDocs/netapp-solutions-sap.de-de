---
sidebar: sidebar 
permalink: backup/anf-cba-backup-operations-with-hana-multiple-host-systems.html 
keywords: system replication, cba, hsr, multiple host, standby host 
summary: In diesem Abschnitt wird die Durchführung von Backup-Vorgängen mit HANA-Systemreplikation beschrieben. 
---
= Backup-Vorgänge mit HANA Systemen mit mehreren Hosts
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:anf-cba-backup-operations-with-hana-system-replication.html["Zurück: Backup-Vorgänge mit HANA System Replication."]

Die HANA Datenbank führt Snapshot Backups auf dieselbe Weise wie für Systeme mit einem Host aus. Die SQL-Befehle für die Backup-Operation müssen in der Systemdatenbank ausgelöst werden. Der HANA-Backup-Savepoint wird für alle HANA-Worker-Nodes erstellt, damit alle Datenvolumes jedes Node konsistent sind. Im nächsten Schritt müssen die Snapshot Storage-Vorgänge für jedes Daten-Volume ausgeführt werden.



== HANA Systeme mit mehreren Hosts ohne Standby-Host

Ein HANA-System mit mehreren Hosts ohne Standby-Host wird in CBA ähnlich wie ein HANA-System mit einem Host konfiguriert.

. Das HANA-Plug-in muss auf dem Worker-Node installiert werden, auf dem der HANA-Nameserver und die Systemdatenbank ausgeführt werden. Die Worker-Knoten, auf denen die Indexserver ausgeführt werden, benötigen kein HANA-Plug-in.
. Der HDB-Benutzerspeicher-Schlüssel wird für die Systemdatenbank auf die gleiche Weise konfiguriert wie für ein HANA-System mit einem Host.
. In der Konfiguration des Storage-Footprints müssen alle Daten-Volumes des HANA-Systems hinzugefügt werden.
+
Im folgenden Beispiel würden Sie Data1-, Data2- und Data3-Volumes hinzufügen.

+

NOTE: Die Daten-Volumes jedes HANA-Hosts müssen auf jedem Host auf dieselbe Weise gemountet werden wie die Konfiguration eines Standby-Hosts. Cloud Backup for Applications erstellt eine Liste der im Backup enthaltenen Dateien und muss daher auf alle Volumes zugreifen können, die zum HANA-System gehören. Die Dateiliste ist für die Wiederherstellung einzelner Dateien erforderlich, wenn die regionsübergreifende ANF-Replizierung oder ANF-Backup aktiviert ist.

+
image:anf-cba-image111.png["Diese Abbildung zeigt, wie ein HANA-Plugin auf Worker-Knoten installiert werden muss, auf denen der Nameserver/systemDB läuft."]





== HANA Systeme mit mehreren Hosts und Standby-Host

Bei der aktuellen CBA-Version werden HANA-Systeme mit mehreren Hosts mit einem Standby-Host unterstützt, wobei davon ausgegangen wird, dass nach einem Failover des Nameservers auf den Standby-Host der ausgefallene Host neu gestartet wird und dann die gleiche Betriebssystemkonfiguration, Dateisystem-Mounts und HANA-Plugin enthält.

Ein HANA-System mit mehreren Hosts und Standby-Host wird in CBA mit den folgenden Schritten konfiguriert.

. Das HANA-Plug-n muss auf dem Worker-Node installiert werden, auf dem die HANA-Nameserver/Systemdatenbank ausgeführt wird.
. Der HDB-Benutzerspeicher-Schlüssel wird mit zwei Hosts konfiguriert: Der Systemdatenbank (Name Server-Host) und dem Standby-Host. Die Host:Port-Zeichenfolgen in der CBA-Schlüsselkonfiguration müssen durch ein Semikolon getrennt werden, und die Liste muss mit doppelten Anführungszeichen beginnen und enden. Der hdbsql-Client beginnt dann mit dem ersten Eintrag im User Store-Schlüssel und versucht, eine Verbindung zur Datenbank herzustellen. Wenn der Eintrag nicht funktioniert, wird der nächste Eintrag verwendet. Daher ist es wichtig, den primären Nameserver-Host als ersten und den Standby-Host als zweiten Eintrag im User Store-Schlüssel zu konfigurieren.
+
image:anf-cba-image112.png["In diesem Screenshot wird der Bildschirm Benutzerspeicher hinzufügen mit den entsprechenden Informationen angezeigt."]

. Alle Daten-Volumes des HANA-Systems müssen der Konfiguration des Storage-Platzbedarfs hinzugefügt werden.
+
Im Beispiel aus der Abbildung unten müssten Sie Data1- und Data2-Volumes hinzufügen.

+
image:anf-cba-image113.png["Diese Abbildung zeigt, wie Data1 und Data2 zu den Worker Nameservern und dem Standby hinzugefügt werden."]



Bei einem Failover des Nameserver zum Standby-Host wird davon ausgegangen, dass der ausgefallene Host in einem kurzen Zeitrahmen neu gestartet wird und dieselbe Konfiguration wie zuvor hat. In diesem Fall sind das HANA-Plugin und die hdbsql und hdb User Store-Komponenten verfügbar und können weiterhin für Backup-Vorgänge verwendet werden.

Mit der zuvor beschriebenen User Store-Konfiguration verwendet der hdbsql-Client nun den zweiten Host-Eintrag, der auf den aktuellen Nameserver-Host verweist und Backup-Vorgänge ausführt.

image:anf-cba-image114.png["Diese Abbildung zeigt, dass die ausgefallene VM neu gestartet wird und nach einem Failover zum Standby-Host als neuer Standby-Host fungiert."]

link:anf-cba-where-to-find-additional-information-and-version-history.html["Weiter: Wo finden Sie zusätzliche Informationen und Versionsverlauf."]
