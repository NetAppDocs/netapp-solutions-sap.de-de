---
sidebar: sidebar 
permalink: backup/anf-cba-overview-of-installation-and-configuration-steps.html 
keywords: bluexp, hana host, backup user, hana system database 
summary: In diesem Abschnitt werden die Installation und Konfiguration aller Komponenten dieser Lösung beschrieben. 
---
= Überblick über die Installations- und Konfigurationsschritte
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:anf-cba-cloud-backup-for-applications-concepts-and-best-practices.html["Früher: Konzepte und Best Practices für Cloud Backup für Applikationen"]

[role="lead"]
Die erforderlichen Installations- und Konfigurationsschritte lassen sich in drei Bereiche aufteilen.

* Installation und Konfiguration von NetApp BlueXP Komponenten
+
Muss einmal bei der ersten Einrichtung der Datensicherungslösung durchgeführt werden.

* Vorbereitungsschritte für HANA-Host und -Datenbank.
+
Muss für jede HANA-Datenbank durchgeführt werden, die durch CBA geschützt werden soll.

* Konfigurationsschritte in Cloud Backup für Applikationen.
+
Muss für jede HANA-Datenbank durchgeführt werden, die durch CBA geschützt werden soll.





== Installation und Konfiguration von NetApp BlueXP Komponenten

Die Installation und Konfiguration der NetApp BlueXP Komponenten finden Sie in https://docs.netapp.com/us-en/cloud-manager-backup-restore/concept-protect-cloud-app-data-to-cloud.html["Cloud-native Applikationsdaten sichern – mit der NetApp Dokumentation"^].

. Melden Sie sich bei BlueXP an und richten Sie ein NetApp Konto ein.
. Implementieren Sie den BlueXP Connector in Ihrem Azure vnet.
. Erstellen Sie die Arbeitsumgebung für Azure NetApp Files in BlueXP.


image:anf-cba-image5.png["Dieses Bild stellt die Architektur der Lösung wie in diesem Abschnitt beschrieben dar."]



== Vorbereitungsschritte für HANA-Host und -Datenbank

. JAVA 11-Installation auf HANA-Host. Auf den HANA-Datenbank-Hosts muss entweder Java 11 (64-Bit) Oracle Java oder OpenJDK installiert sein.
. Stellen Sie das CBA HANA-Plug-in auf dem HANA-Host bereit, wie unter beschrieben link:https://docs.netapp.com/us-en/cloud-manager-backup-restore/task-deploy-snapcenter-plugin-for-sap-hana.html["Plug-in für die Implementierung von Cloud Backup für Applikationen für SAP HANA – NetApp Dokumentation"].
. Erstellen Sie einen Backup-Benutzer in der HANA-Systemdatenbank, wie im nächsten Kapitel beschrieben.




== Konfigurationsschritte in Cloud Backup für Applikationen

. Hinzufügen eines HANA-Hosts zu Cloud Backup für Applikationen
+
.. Konfiguration des HANA-Benutzerspeichers
.. Konfiguration des Storage-Platzbedarfs


. Backup-Richtlinien für das HANA-System erstellen und zuweisen
+
.. Snapshot-basierte Backup-Vorgänge.
.. Dateibasierte Backup-Vorgänge


. Konfigurieren Sie Backup-Vorgänge ohne Daten-Volumes.
+
.. Konfiguration des Storage-Platzbedarfs
.. Erstellen und Zuweisen einer Backup-Richtlinie


. Konfigurieren Sie globale Backup-Vorgänge ohne Datenvolumen.
+
.. Konfiguration der Systemdetails
.. Konfiguration des Storage-Platzbedarfs
.. Erstellen und Zuweisen einer Backup-Richtlinie




In den nächsten Kapiteln werden die Konfigurationsschritte für Cloud Backup for Applications detailliert beschrieben.



== Erstellen Sie den Backup-Benutzer in der HANA-Systemdatenbank

NetApp empfiehlt die Konfiguration eines dedizierten Datenbankbenutzers in der HANA-Datenbank, um die Backup-Vorgänge mit CBA auszuführen. Im zweiten Schritt wird für diesen Backup-Benutzer ein SAP HANA-Benutzerspeicher-Schlüssel konfiguriert, der bei der Konfiguration des SAP HANA-Plug-ins Cloud Backup für Applikationen verwendet wird. Die folgende Abbildung zeigt das SAP HANA Studio, über das Sie den Backup-Benutzer erstellen können.

Folgende Berechtigungen sind erforderlich:

* Backup-Admin
* Katalog lesen
* Administrator für Datenbank-Backups
* Datenbank-Recovery-Operator


Für ein SAP HANA MDC-System müssen Sie den Benutzer in der Systemdatenbank erstellen, da alle Backup-Befehle für das System und die Mandantendatenbanken über die Systemdatenbank ausgeführt werden.

image:anf-cba-image10.png["Dieser Screenshot zeigt, wo ein Benutzer in der Systemdatenbank erstellt werden soll."]



== HANA-System zu Cloud Backup für Applikation hinzufügen

. Wählen Sie in BlueXP *Protection* > *Backup und Recovery* > *Applications.*
+
image:anf-cba-image11.png["In diesem Screenshot wird der blueXP-Bildschirm mit dem richtigen Pfad zu den Anwendungen angezeigt."]

. Die nächsten Screenshots zeigen den Workflow beim Hinzufügen des ersten HANA-Systems. Wenn zu Cloud Backup for Applications bereits Systeme hinzugefügt wurden, ist der erste Bildschirm eine Dashboard-Ansicht mit der Schaltfläche *System hinzufügen*, um ein zusätzliches HANA-System hinzuzufügen. In diesem Fall ist Schritt 5 der erste Schritt. Klicken Sie Auf *Anwendung Entdecken*.
+
image:anf-cba-image12.png["Dieser Screenshot zeigt den Workflow beim Hinzufügen des ersten HANA-Systems."]

. Klicken Sie Auf *Cloud Native*.
+
image:anf-cba-image13.png["In diesem Screenshot ist die Auswahlseite „Hybrid vs Cloud Native“ dargestellt."]

. Klicken Sie auf *SAP HANA*.
+
image:anf-cba-image14.png["In diesem Screenshot ist die Auswahlseite „Hybrid vs Cloud Native“ dargestellt."]

. Wählen Sie im Bildschirm Systemdetails den Systemtyp HANA Single-Container oder mandantenfähiger Datenbank-Container aus. Geben Sie die SID des HANA-Systems an und geben Sie freien Text als Systemnamen ein.
+
Die folgenden Screenshots zeigen die Konfiguration eines SAP HANA Systems PR1.

+
image:anf-cba-image15.png["Dieser Screenshot zeigt die Konfiguration eines SAP HANA-Systems PR1."]

. Klicken Sie auf *Add Plug-in Host*, um den HANA-Datenbank-Host hinzuzufügen. Normalerweise wird ein Hostname verwendet. Auch IP-Adressen funktionieren. Port `8145` Ist der Standardport des HANA-Plug-ins, das auf dem HANA-Datenbank-Host installiert wurde. Wenn während der Plug-in-Installation keine Änderungen vorgenommen wurden, ist der Standardport gültig.
+

NOTE: Bei einem HANA-System mit mehreren Hosts müssen Sie nur den Host hinzufügen, auf dem die Systemdatenbank ausgeführt wird.

+
image:anf-cba-image16.png["In diesem Screenshot wird der Bildschirm Add-Plug-in Host Selection angezeigt."]

. Um einen HANA-Datenbank-Benutzer-Speicherschlüssel hinzuzufügen, klicken Sie auf *Add User Store Key*.
+
Geben Sie die Informationen zur Konfiguration des Benutzerspeicherschlüssels für die HANA-Datenbank ein. Sie können einen beliebigen Namen als Schlüsselnamen angeben. Die Systemdetails beinhalten die IP-Adresse und den Port, der mit der Systemdatenbank über den hdbsql-Client kommunizieren soll. Für ein SAP HANA MDC-System, Port `3<instanceNo>13` Ist der Standardport für den SQL-Zugriff auf die Systemdatenbank.

+
Sie müssen den Benutzernamen und das Kennwort für den Datenbankbenutzer in der zuvor konfigurierten Systemdatenbank angeben. Cloud Backup für Applikationen erstellt aus diesen Informationen automatisch einen Benutzerspeicher-Schlüssel und verwendet den Schlüssel zur Kommunikation mit der HANA-Datenbank.

+
image:anf-cba-image17.png["In diesem Screenshot wird der Bildschirm Auswahl des Benutzerspeichers hinzufügen angezeigt."]

. Auf dem HANA-Host können Sie überprüfen, ob der Schlüssel funktioniert, indem Sie die folgenden Befehle ausführen:
+
....
pr1adm@vm-pr1:/usr/sap/PR1/HDB01> hdbuserstore list
DATA FILE       : /usr/sap/PR1/pr1adm/.hdb/vm-pr1/SSFS_HDB.DAT
KEY FILE        : /usr/sap/PR1/pr1adm/.hdb/vm-pr1/SSFS_HDB.KEY
KEY PR1KEY
  ENV : 10.0.1.20:30113
  USER: SNAPSHOT
KEY PR1SAPDBCTRL
  ENV : vm-pr1:30113
  USER: SAPDBCTRL
pr1adm@vm-pr1:/usr/sap/PR1/HDB01> hdbsql -U PR1KEY
Welcome to the SAP HANA Database interactive terminal.
Type:  \h for help with commands
       \q to quit
hdbsql SYSTEMDB=>
....
. Klicken Sie auf *Weiter*, um die Konfiguration der Systemdetails abzuschließen.
+
image:anf-cba-image18.png["In diesem Screenshot wird der Bildschirm „Systemdetails“ angezeigt."]

. Klicken Sie auf *Add Storage*, um den Speicherplatz der HANA-Datenbank zu konfigurieren.
+
image:anf-cba-image19.png["In diesem Screenshot wird die Schaltfläche Storage hinzufügen auf dem Bildschirm Storage Footprint angezeigt."]

. Geben Sie die Informationen für die Storage Volumes des HANA-Systems ein.
. Wählen Sie die Arbeitsumgebung und das NetApp Konto aus, die für die ANF-Volumes des HANA-Systems verwendet wird. Wählen Sie das Datenvolumen Ihres HANA-Systems aus. In unserem Beispiel ist dies der Fall `PR1_data_mnt00001`.
+

NOTE: Bei einem SAP HANA-System mit mehreren Hosts müssen die Daten-Volumes aller HANA-Hosts des Systems ausgewählt werden.

+
image:anf-cba-image20.png["In diesem Screenshot wird der Auswahlbildschirm „Storage Footprint hinzufügen“ angezeigt."]

. Klicken Sie auf *Weiter*, um den Speicherplatz hinzuzufügen.
+
image:anf-cba-image21.png["In diesem Screenshot wird gezeigt, wie der Storage-Platzbedarf hinzugefügt wird."]

. Überprüfen Sie die Konfiguration und klicken Sie auf *System hinzufügen*.
+
image:anf-cba-image22.png["In diesem Screenshot wird gezeigt, wie das Speichersystem hinzugefügt wird."]

+
image:anf-cba-image23.png["Dieser Screenshot zeigt das Ergebnis."]



Das HANA-System wird jetzt zu Cloud Backup für Applikationen hinzugefügt. Im nächsten Schritt müssen Sie die Backup-Vorgänge konfigurieren.

image:anf-cba-image24.png["Dieser Screenshot zeigt, wo Backup-Vorgänge konfiguriert werden."]

link:anf-cba-create-backup-policies.html["Als Nächstes: Erstellen Sie Backup-Richtlinien."]
